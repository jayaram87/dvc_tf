schema: '2.0'
stages:
  get_data:
    cmd: python src/stage_01_get_data.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: e740d6c232652e743d4587f7a6124814
      size: 338
    - path: src/stage_01_get_data.py
      md5: 1058ee1461051087e0bfbc66394703e0
      size: 1557
    outs:
    - path: data/X_test.npy
      md5: 7942b66f2197f22a8ed486c6bc205255
      size: 7840128
    - path: data/X_train_full.npy
      md5: 6e5236d1fa7110b7d4c75d3822137908
      size: 47040128
    - path: data/y_test.npy
      md5: 3deb6f9de60479b947785b62051694b8
      size: 10128
    - path: data/y_train_full.npy
      md5: 40b22dba779a1dffd8089edc7991f797
      size: 60128
  prepare_base_model:
    cmd: python src/stage_02_prepare_base_model.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: e740d6c232652e743d4587f7a6124814
      size: 338
    - path: src/stage_02_prepare_base_model.py
      md5: 38947e29af7416c8901136ed344d304c
      size: 1678
    - path: src/utils/common.py
      md5: 2acd7fd10cb8669dfca427aa8fe9d1a1
      size: 1492
    - path: src/utils/model.py
      md5: 4da27d98424f0834c94750587335872e
      size: 1763
    params:
      params.yaml:
        LEARNING_RATE: 0.001
    outs:
    - path: artifacts/model/model.h5
      md5: 95043e5947deb88405d0e3b1104943e4
      size: 1084000
  prepare_callback:
    cmd: python src/stage_03_prepare_callback.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: e740d6c232652e743d4587f7a6124814
      size: 338
    - path: params.yaml
      md5: c33aedf611dfe1328c1a33896339f386
      size: 64
    - path: src/stage_03_prepare_callback.py
      md5: aa04144d120d648db82ee6a57d056b22
      size: 1611
    - path: src/utils/callbacks.py
      md5: f334646ad21433effa0bc0b7f12556ce
      size: 1628
    - path: src/utils/common.py
      md5: 2acd7fd10cb8669dfca427aa8fe9d1a1
      size: 1492
    outs:
    - path: artifacts/callbacks/checkpoint_cb.cb
      md5: d84f295f3402d4577005ca198f601456
      size: 723
    - path: artifacts/callbacks/tensorboard_cb.cb
      md5: 5939ca03e8ea456e9d7ef067fc32ba55
      size: 572
  train:
    cmd: python src/stage_04_train.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/callbacks/checkpoint_cb.cb
      md5: d84f295f3402d4577005ca198f601456
      size: 723
    - path: artifacts/callbacks/tensorboard_cb.cb
      md5: 5939ca03e8ea456e9d7ef067fc32ba55
      size: 572
    - path: artifacts/model/model.h5
      md5: 95043e5947deb88405d0e3b1104943e4
      size: 1084000
    - path: configs/config.yaml
      md5: e740d6c232652e743d4587f7a6124814
      size: 338
    - path: data/X_train_full.npy
      md5: 6e5236d1fa7110b7d4c75d3822137908
      size: 47040128
    - path: data/y_train_full.npy
      md5: 40b22dba779a1dffd8089edc7991f797
      size: 60128
    - path: src/stage_04_train.py
      md5: 90ef51ab6a9110590db672b7a909d374
      size: 2415
    - path: src/utils/callbacks.py
      md5: f334646ad21433effa0bc0b7f12556ce
      size: 1628
    - path: src/utils/common.py
      md5: 2acd7fd10cb8669dfca427aa8fe9d1a1
      size: 1492
    - path: src/utils/data_management.py
      md5: 57341595ccbd458e90e119c08486b3ae
      size: 554
    - path: src/utils/model.py
      md5: 4da27d98424f0834c94750587335872e
      size: 1763
    params:
      params.yaml:
        BATCH_SIZE: 16
        EPOCHS: 50
    outs:
    - path: artifacts/checkpoints
      md5: 2e00673af9cd7775cb932a22db3be9b3.dir
      size: 1086400
      nfiles: 1
    - path: artifacts/tensorboard_log_dir
      md5: 24087f91c3e58dda0d05b7883680fa40.dir
      size: 53683
      nfiles: 2
    - path: artifacts/trained_model
      md5: 5ffad6051502810f13b872d760a099fd.dir
      size: 1086400
      nfiles: 1
